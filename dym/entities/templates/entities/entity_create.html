{% extends 'core/base.html' %}
{% load static %}
{% load i18n %}

{% load form_tags %}   <!-- Tagy pro validaci  -->     

{% block title %}{% trans "Create Entity" %}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-center">{% trans "Create Entity" %}</h1>
    <form method="post" class="space-y-2 bg-white p-8 rounded-lg shadow-lg border border-gray-200">
        {% csrf_token %}
        
        <!-- ObecnÃ© chyby -->
        {% if entity_form.non_field_errors %}
        <div class="bg-red-50 border border-red-300 text-red-700 p-4 rounded">
            <ul>
                {% for error in entity_form.non_field_errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Entity Information -->
        <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
            <fieldset class="space-y-1">
                <legend class="text-lg font-bold text-gray-800">{% trans "Entity Information" %}</legend>
                <div class="grid grid-cols-2 gap-1">
                    
                    <!-- Entity Dispaly name -->
                    <div class="form-group">
                        <label for="id_display_name" class="block text-sm font-medium text-gray-700">{% trans "Display name" %}</label>
                        {{ entity_form.display_name }}
                        {% render_field_errors entity_form.display_name %}
                    </div>
                    
                     <!-- Entity Company name -->
                    <div class="form-group">
                        <label for="id_company_name" class="block text-sm font-medium text-gray-700">{% trans "Company name" %}</label>
                        {{ entity_form.company_name }}
                        {% render_field_errors entity_form.company_name %}
                    </div>
                    
                    
                    <!-- Entity Legal Entity Type -->
                    <div class="form-group">
                        <label for="id_legal_entity_type" class="block text-sm font-medium text-gray-700">{% trans "Subject" %}</label>
                        {{ entity_form.legal_entity_type }}
                        {% render_field_errors entity_form.legal_entity_type %}
                    </div>
                    
                    
                    <!-- Entity Legal entity_type -->
                    <div class="form-group">
                        <label for="id_entity_type" class="block text-sm font-medium text-gray-700">{% trans "Legal entity type" %}</label>
                        {{ entity_form.entity_type }}
                        {% render_field_errors entity_form.entity_type %}
                    </div>
                    
                    
                    <!-- Entity Company ID -->
                    <div class="form-group">
                        <label for="id_company_id" class="block text-sm font-medium text-gray-700">{% trans "Company ID" %}</label>
                        {{ entity_form.company_id }}
                        {% render_field_errors entity_form.company_id %}
                    </div>
                    
                    
                    <!-- Entity Company VAT -->
                    <div class="form-group">
                        <label for="id_company_vat" class="block text-sm font-medium text-gray-700">{% trans "Company VAT" %}</label>
                        {{ entity_form.company_vat }}
                        {% render_field_errors entity_form.company_vat %}
                    </div>
                    
                    
                    <!-- Entity birth number -->
                    <div class="form-group">
                        <label for="id_birth_number" class="block text-sm font-medium text-gray-700">{% trans "Birth number" %}</label>
                        {{ entity_form.birth_number }}
                        {% render_field_errors entity_form.birth_number %}
                    </div>
                </div>
            </fieldset>
        </div>
      

        <!-- Addresses -->
        <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
            <fieldset class="space-y-1">
                <legend class="text-lg font-bold text-gray-800">{% trans "Address" %}</legend>
                {{ address_formset.management_form }}




                <div class="grid grid-cols-2 gap-1">
                    {% for form in address_formset %}
                        
                        <div class="form-group">
                            <label for="{{ form.city.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "City" %}</label>
                            {{ form.city }}
                        </div>

                        <div class="form-group">
                            <label for="{{ form.street.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Street" %}</label>
                            {{ form.street }}
                        </div>
                    

                        <div class="form-group">
                            <label for="{{ form.postal_code.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Postal code" %}</label>
                            {{ form.postal_code }}
                        </div>
  
                        <div class="form-group">
                            <label for="{{ form.country.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Country" %}</label>
                            {{ form.country }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.address_type.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Address type" %}</label>
                            {{ form.address_type }}
                        </div>
                    {% endfor %}
                </div>
            </fieldset>
        </div>
        
        <!-- Contact Persons -->
        <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
            <fieldset class="space-y-2">
                <legend class="text-lg font-bold text-gray-800">{% trans "Contact Person" %}</legend>
                {{ contact_person_formset.management_form }}
                <div class="grid grid-cols-2 gap-1">
                    {% for form in contact_person_formset %}
                        <div class="form-group">
                            <label for="{{ form.first_name.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "First Name" %}</label>
                            {{ form.first_name }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.last_name.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Last Name" %}</label>
                            {{ form.last_name }}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.email.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Email" %}</label>
                            {{ form.email }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.phone.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Phone Number" %}</label>
                            {{ form.phone }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.position.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Position" %}</label>
                            {{ form.position }}
                        </div>
                    {% endfor %}
                </div>
            </fieldset>
        </div>
        
        <!-- Bank Accounts -->
        <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
            <fieldset class="space-y-2">
                <legend class="text-lg font-bold text-gray-800">{% trans "Bank Account" %}</legend>
                {{ bank_account_formset.management_form }}
                <div class="grid grid-cols-2 gap-1">
                    {% for form in bank_account_formset %}
                        
                        <div class="form-group">
                            <label for="{{ form.bank_name.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Bank Name" %}</label>
                            {{ form.bank_name }}
                        </div>
                        <div class="form-group">
                            <label for="{{ form.account_name.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Account Name" %}</label>
                            {{ form.account_name }}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.bank_account_number.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Account Number" %}</label>
                            {{ form.bank_account_number }}
                        </div>

                        <div class="form-group">
                            <label for="{{ form.currency.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "Currency" %}</label>
                            {{ form.currency }}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.iban.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "IBAN" %}</label>
                            {{ form.iban }}
                        </div>

                        <div class="form-group">
                            <label for="{{ form.swift.id_for_label }}" class="block text-sm font-medium text-gray-700">{% trans "SWIFT" %}</label>
                            {{ form.swift }}
                        </div>

                    {% endfor %}
                </div>
            </fieldset>
        </div>
        
        <!-- Submit Button -->
        <div class="text-center">
            <button type="submit" class="px-8 py-2 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 transition duration-300">
                {% trans "Save" %}
            </button>
        </div>
    </form>
</div>
{% endblock %}
