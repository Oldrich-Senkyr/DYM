{% extends 'core/base.html' %}
{% load i18n %}

{% block title %}{% trans "Presence overview" %}{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto py-6">

    <h1 class="text-2xl font-bold text-gray-800 mb-6">{% trans "Presence overview" %}</h1>

    <!-- Výběr data -->
    <form method="get" class="mb-6">
        <label for="date" class="block text-lg font-medium text-gray-700 mb-2">{% trans "Select date" %}:</label>
        <div class="flex gap-4 items-center">
            <input type="date" id="date" name="date"
                   value="{{ request.GET.date|default:'' }}"
                   class="border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <button type="submit"
                    class="bg-blue-600 text-white font-semibold py-2 px-4 rounded hover:bg-blue-700">
                {% trans "Show" %}
            </button>
        </div>
    </form>

    <!-- Tabulka přítomnosti -->
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white shadow-md rounded-lg overflow-hidden border border-gray-200">
            <thead class="bg-gray-100 text-gray-700">
                <tr>
                    <th class="py-3 px-4 text-left border-b border-gray-200">{% trans "ID" %}</th>
                    <th class="py-3 px-4 text-left border-b border-gray-200">{% trans "First name" %}</th>
                    <th class="py-3 px-4 text-left border-b border-gray-200">{% trans "Last name" %}</th>
                    <th class="py-3 px-4 text-left border-b border-gray-200">{% trans "Role" %}</th>
                    <th class="py-3 px-4 text-left border-b border-gray-200">{% trans "Card" %}</th>
                    <th class="py-3 px-4 text-left border-b border-gray-200">{% trans "Arrival" %}</th>
                    <th class="py-3 px-4 text-left border-b border-gray-200">{% trans "Departure" %}</th>
                    <th class="py-3 px-4 text-left border-b border-gray-200">{% trans "Work Time" %}</th>
                    <th class="py-3 px-4 text-left border-b border-gray-200">{% trans "Break Time" %}</th>
                    <th class="py-3 px-4 text-left border-b border-gray-200">{% trans "Validation" %}</th>
                </tr>
            </thead>
            <tbody>
                {% for person in persons %}
                <tr class="hover:bg-gray-50">
                    <td class="py-3 px-4 border-b border-gray-200">{{ person.unique_id }}</td>
                    <td class="py-3 px-4 border-b border-gray-200">{{ person.first_name }}</td>
                    <td class="py-3 px-4 border-b border-gray-200">{{ person.last_name }}</td>
                    <td class="py-3 px-4 border-b border-gray-200">{{ person.get_role_display }}</td>
                    <td class="py-3 px-4 border-b border-gray-200">{{ person.card_number }}</td>
                    <td class="py-3 px-4 border-b border-gray-200">{{ person.arrival }}</td>
                    <td class="py-3 px-4 border-b border-gray-200">{{ person.departure }}</td>
                    <td class="py-3 px-4 border-b border-gray-200">{{ person.work_time }}</td>
                    <td class="py-3 px-4 border-b border-gray-200">{{ person.break_time }}</td>
                    <td class="py-3 px-4 border-b border-gray-200">
                        {% if person.validation == "OK" %}
                            <span class="text-green-600 font-semibold">OK</span>
                        {% else %}
                            <span class="text-red-600 font-semibold">{% trans "Invalid" %}</span>
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="10" class="py-4 px-4 text-center text-gray-500">{% trans "No records found." %}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
{% endblock %}
